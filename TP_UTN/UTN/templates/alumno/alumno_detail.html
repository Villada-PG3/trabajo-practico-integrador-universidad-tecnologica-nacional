<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil de {{ object }} - Sistema Universitario</title>

    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" href="https://tse2.mm.bing.net/th/id/OIP.cqBKPdnHYvuLe2CUvTk8EwHaHa?rs=1&pid=ImgDetMain&o=7&rm=3" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['DM Sans', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>

<body class="min-h-screen bg-background text-foreground">

<main class="max-w-7xl mx-auto px-4 py-8">

    <!-- HORARIO SEMANAL -->
    <div class="bg-card rounded-lg border shadow-sm p-6 mt-10">
        <h2 class="text-2xl font-bold mb-6">Horario Semanal</h2>

        <div class="overflow-x-auto">
            <table class="min-w-full border text-sm">
                <thead class="bg-primary/10">
                    <tr>
                        <th class="border px-4 py-2">Día</th>
                        <th class="border px-4 py-2">Materias</th>
                    </tr>
                </thead>

                <tbody>
                {% for dia, materias in semana.items %}
                    <tr class="hover:bg-muted/50 transition">
                        <td class="border px-4 py-2 font-semibold w-32">
                            {{ dia }}
                        </td>

                        <td class="border px-4 py-2">
                            {% if materias %}
                                <ul class="space-y-2">
                                    {% for m in materias %}
                                        <li class="bg-secondary/10 p-3 rounded-lg shadow-sm">
                                            <p class="font-bold text-secondary">{{ m.materia }}</p>

                                            <p class="text-sm text-muted-foreground">
                                                {{ m.horario }} — Turno {{ m.turno|title }}
                                            </p>

                                            <p class="mt-1 text-sm">
                                                {% if m.nota_1 is not None or m.nota_2 is not None or m.nota_3 is not None %}
                                                    <strong>Notas:</strong>
                                                    {{ m.nota_1|default:"—" }} /
                                                    {{ m.nota_2|default:"—" }} /
                                                    {{ m.nota_3|default:"—" }}
                                                {% else %}
                                                    <span class="text-muted-foreground">Sin nota</span>
                                                {% endif %}
                                            </p>

                                            {% if m.promedio is not None %}
                                                <p class="mt-1 text-sm">
                                                    <strong>Promedio:</strong>
                                                    <span class="font-bold">{{ m.promedio }}</span> —
                                                    {% if m.aprobado %}
                                                        <span class="text-green-600 font-semibold">Aprobado</span>
                                                    {% else %}
                                                        <span class="text-red-600 font-semibold">No aprobado</span>
                                                    {% endif %}
                                                </p>
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% else %}
                                <span class="text-muted-foreground">—</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- MATERIAS CURSADAS -->
    <div class="bg-card rounded-lg border shadow-sm p-6 mt-10">
        <h2 class="text-2xl font-bold mb-6">Materias cursadas y notas</h2>

        <div class="overflow-x-auto">
            <table class="min-w-full border text-sm">
                <thead class="bg-primary/10">
                    <tr>
                        <th class="border px-4 py-2 text-left">Materia</th>
                        <th class="border px-4 py-2">Nota 1</th>
                        <th class="border px-4 py-2">Nota 2</th>
                        <th class="border px-4 py-2">Nota 3</th>
                        <th class="border px-4 py-2">Promedio</th>
                        <th class="border px-4 py-2">Estado</th>
                    </tr>
                </thead>

                <tbody>
                {% for ins in materias_cursadas %}
                    <tr class="hover:bg-muted/50 transition">
                        <td class="border px-4 py-2 font-medium">
                            {{ ins.materia_curso.materia.nombre }}
                        </td>

                        <td class="border px-4 py-2 text-center">{{ ins.nota_1|default:"—" }}</td>
                        <td class="border px-4 py-2 text-center">{{ ins.nota_2|default:"—" }}</td>
                        <td class="border px-4 py-2 text-center">{{ ins.nota_3|default:"—" }}</td>

                        <td class="border px-4 py-2 text-center font-semibold">
                            {{ ins.promedio|default:"—" }}
                        </td>

                        <td class="border px-4 py-2 text-center">
                            {% if ins.finalizado %}
                                {% if ins.aprobado %}
                                    <span class="text-green-600 font-semibold">Aprobado</span>
                                {% else %}
                                    <span class="text-red-600 font-semibold">No aprobado</span>
                                {% endif %}
                            {% else %}
                                <span class="text-muted-foreground">En curso</span>
                            {% endif %}
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" class="text-center text-muted-foreground py-4">
                            No hay materias cursadas.
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</main>
</body>
</html>
